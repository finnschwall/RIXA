{% extends "base_account.html" %}
{% load static %}
{% block title %}Register{% endblock %}
{% block content %}
{% load i18n %}
{% load bootstrap5 %}

<body>

<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="termsModalLabel">Terms and Conditions</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

   <div class="mt-2 flex justify-center text-sm text-gray-600"><div class="prose"><h1>Privacy Policy (Art. 13 GDPR)</h1><h2>1. Personal Data</h2><p>For the purpose of your participation in several sessions of the experiment, we process your e-mail address as personal data. For the purpose of your participation in the study we collect and process your interaction data during the experiment, including chats, interaction speed and interaction behavior. We also collect sociodemographic data (age, education level, profession) to gather insights on chat behavior. We strip any identifiable information before further processing and publishing. However, given the challenges of automatic processing of chat data, there is a residual risk of re-identification in the dataset, therefore it might be possible to identify you as a natural person (data subject) if you accept to be included in the dataset. Your risk of re-identification depends decisively on the data you provide in the chat. We therefore explicitly ask you to not include any personal data neither of yourself nor others in the chat. To further minimize this risk, the dataset will be only made available to members of research and education institutions and only upon request. It will not be publicly available for everybody on the Internet.</p><p>Definition: An identifiable natural person is one who can be identified, directly or indirectly, in particular by reference to an identifier such as a name, an identification number, location data, an online identifier or to one or more factors specific to the physical, physiological, genetic, mental, economic, cultural or social identity of that natural person</p><p class="text-sm">(Art. 4, No. 1 of the EU General Data Protection Regulation (GDPR)).</p><h2>2. Controller</h2><p>Responsible for the data processing according to Art. 4, No. 7 GDPR as well as other data protection regulations:</p><p class="font-bold">Karlsruher Institut für Technologie (KIT) <br>Kaiserstraße 12, 76131 Karlsruhe, Deutschland <br>Tel.: +49 721 608-0 <br>Fax: +49 721 608-44290 <br>E-Mail: info@kit.edu</p><p>The Karlsruhe Institute of Technology is a corporation governed by public law. It is represented by its president Prof. Jan S. Hesthaven.</p><h2>3. Data processing</h2><p>The activity data you have given us will be collected and stored for the purpose of scientific research. The specific processing purposes are to infer user needs, to enhance human-machine interaction.</p><p>In order to operate the server we need to record your IP address. It will not be associated with further recorded data and deleted automatically not later than 4 weeks after the recording.</p><p>For our chatbot we use local models (e.g. from the Llama family) that are hosted either on a server located at KIT or remotely with an external service (https://www.runpod.io/).</p><p>The external provider is only used for computation heavy tasks (e.g. the calculation of a response given a prompt) and not to provide the website in itself. All user data is exclusively stored on a KIT server.</p><p>For load peaks we may send requests to FhGenie, a GDPR compliant variant of ChatGPT. All data will be processed exclusively in the Fraunhofer Azure cloud and only on European servers. The data will not be stored by a third party, specifically OpenAI and will not be used for their training purposes.</p><p>During the account creation each account gets assigned an identifier that is used to consolidate a user’s data. We regularly archive data, at the latest every 6 months. This process involves removing the identifier, transferring the data to a separate server and deleting the data on the application server. Thereupon the data only exists in anonymized form.</p><h2>4. Legal basis</h2><p>The legal basis for the processing is your consent in accordance with Art. 6, par. 1, clause 1 (a) GDPR.</p><p>According to Art. 7 par. 3 GDPR you have the right to withdraw your consent at any time with effect for the future. The consent is voluntary. There are no disadvantages for you if it is denied or withdrawn.</p><h2>5. Your rights</h2><p>You also have the following rights:</p><ul><li>You have the right to obtain information from KIT about the data stored about you and/or to have incorrectly stored data corrected.</li><li>You also have the right of erasure or limitation of processing or the right to object to processing.</li><li>You have the right to withdraw your consent at any time, whereby the lawfulness of processing based on consent before its withdrawal is not affected. To assert these rights, please contact: rixa@iosb.fraunhofer.de</li></ul><p>You also have the right to lodge a complaint with a supervisory authority about the processing of the personal data concerning you by Karlsruhe Institute of Technology. The Supervisory authority of KIT is:</p><p class="font-bold">The State Commissioner for Data Protection and Freedom of Information Baden-Württemberg<br><span class="text-sm">(Landesbeauftragter für den Datenschutz und die Informationsfreiheit Baden-Württemberg).</span></p><h2>6. Data storage</h2><p>The anonymized interaction and sociodemographic data will be kept indefinitely for the purpose of scientific research in order to guarantee the reproducibility of the research results obtained from the study. All identifiable data will be deleted after 6 months at the latest.</p><h2>7. Consent</h2><p>I have read the above information and hereby consent to the collection, storage, and use of my data described in 1) for the purpose of scientific study.</p><p>The consent is voluntary. There are no disadvantages if it is denied or withdrawn. You can address the withdrawal to rixa@iosb.fraunhofer.de.</p><h2>8. Publication</h2><p>Additionally, to the above mentioned scientific study, I also consent to the publication of my anonymized sociodemographic and activity data as raw data to other scientists for the purpose of advancing research.</p></div></div>
{#<p style="margin-top:0pt; margin-bottom:10pt; page-break-before:always; line-height:115%; font-size:14pt;"><strong>Privacy Policy (Art. 13 GDPR)</strong></p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;"><strong>1. Personal Data</strong></p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; text-align:justify; line-height:115%; font-size:11pt;">For the purpose of your participation in several sessions of the experiment, we process your e-mail address as personal data. For the purpose of your participation in the study we collect and process your interaction data during the experiment, including chats and interaction speed. We also collect sociodemographic data (age, education level, profession). We strip any identifiable information before processing and publishing. However, given the challenges of automatic processing of chat data, there is a residual risk of re-identification in the dataset, therefore it might be possible to identify you as a natural person (data subject) if you accept to be included in the dataset. We therefore ask you to not include any personal data in the chat. To further minimize this risk, the dataset will be only made available to members of research and education institutions and only upon request. It will not be publicly available for everybody on the Internet. We will securely store the pseudonymized data and require interested researches to register and get an authorization before getting access to the dataset.</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; text-align:justify; line-height:115%; font-size:11pt;">Definition: An identifiable natural person is one who can be identified, directly or indirectly, in particular by reference to an identifier such as a name, an identification number, location data, an online identifier or to one or more factors specific to the physical, physiological, genetic, mental, economic, cultural or social identity of that natural person</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">(Art. 4, No. 1 of the EU General Data Protection Regulation (GDPR)).</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;"><strong>2. Controller</strong></p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">Responsible for the data processing according to Art. 4, No. 7 GDPR as well as other data protection regulations:</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">Karlsruher Institut f&uuml;r Technologie (KIT)</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">Kaiserstra&szlig;e 12, 76131 Karlsruhe, Deutschland</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">Tel.: +49 721 608-0</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">Fax: +49 721 608-44290</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">E-Mail: info@kit.edu</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">The Karlsruhe Institute of Technology is a corporation governed by public law. It is represented by its president Prof. Jan S. Hesthaven.</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;"><strong>3. Data processing</strong></p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; text-align:justify; line-height:115%; font-size:11pt;">The activity data you have given us will be collected and stored for the purpose of scientific research. The specific processing purposes are to infer user needs, to enhance human-machine interaction.</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; text-align:justify; line-height:115%; font-size:11pt;">In order to operate the server we need to record your IP address. It will not be associated with further recorded data and deleted automatically not later than 4 weeks after the recording.</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;"><strong>4. Legal basis</strong></p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">The legal basis for the processing is your consent in accordance with Art. 6, par. 1, clause 1 (a) GDPR.</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">According to Art. 7 par. 3 GDPR you have the right to withdraw your consent at any time with effect for the future. The consent is voluntary. There are no disadvantages for you if it is denied or withdrawn.</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;"><strong>5. Your rights</strong></p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">You also have the following rights:</p>#}
{#<ul>#}
{#    <li style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">You have the right to obtain information from KIT about the data stored about you and/or to have incorrectly stored data corrected.</li>#}
{#    <li style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">You also have the right of erasure or limitation of processing or the right to object to processing</li>#}
{#    <li style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">You have the right to withdraw your consent at any time, whereby the lawfulness of processing based on consent before its withdrawal is not affected. To assert these rights, please contact:</li>#}
{#</ul>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">You also have the right to lodge a complaint with a supervisory authority about the processing of the personal data concerning you by Karlsruhe Institute of Technology. The Supervisory authority of KIT is:</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">The State Commissioner for Data Protection and Freedom of Information Baden-W&uuml;rttemberg</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">(Landesbeauftragter f&uuml;r den Datenschutz und die Informationsfreiheit Baden-W&uuml;rttemberg).</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;"><strong>6. Data storage</strong></p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; text-align:justify; line-height:115%; font-size:11pt;">The pseudonimyzed interaction and sociodemographic data will be kept indefinitely for the purpose of scientific research in order to guarantee the reproducibility of the research results obtained from the study.&nbsp;</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;"><strong>7. Consent&nbsp;</strong></p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">I have read the above information and hereby consent to the collection, storage, and use of my data described in 1) for the purpose of scientific study.</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;">The consent is voluntary. There are no disadvantages if it is denied or withdrawn.</p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; line-height:115%; font-size:11pt;"><strong>8. Publication</strong></p>#}
{#<p style="margin-top:10pt; margin-bottom:10pt; text-align:justify; line-height:115%; font-size:11pt;">Additionally, to the above mentioned scientific study, I also consent to the publication of my sociodemographic and activity data as raw data to other scientists for the purpose of advancing research.</p>#}
{#<p style="bottom: 10px; right: 10px; position: absolute;"></p>      #}

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="container container-lg text-center">
    <h1 style="font-size: 3em;">Register</h1>
    <p style="font-size: 1.5em;">Your phone number as you entered it on the study website</p>
    <form action="" method="post" >
        {% csrf_token %}
{#        {% bootstrap_form form%}#}
        {% bootstrap_field form.username label="Your Phone Number" placeholder="Phone Number (without country code)" show_label=False show_help=False%}

{% bootstrap_field form.password1 show_label=False show_help=False%}
{% bootstrap_field form.password2%}
{#        <div class="mb-3">#}
{#            <label for="email" class="form-label">Email address</label>#}
{#            <input type="email" value="" id="email" class="form-control" placeholder="Optional">#}
{#        </div>#}
        <div class="mb-3">
            <label for="registration_id"  class="form-label">Registration code (do not change this!)</label>
            <input type="text" value="" id="registration_id" class="form-control" name="registration_id" required>
        </div>
{#        <div class="mb-3">#}
{#            <div style="width:15em;display: inline-block;position:relative; top: -1em">How did you find this?</div>#}
{#            <textarea class="form-control" name="registration_id" id="registration_id"#}
{#                  style="display: inline-block; width: 25.5em;min-height: 3em;" required#}
{#                  placeholder="E.g. randomly stumbled upon the side, were annoyed by the dev to register, a friend showed you...."></textarea>#}
{#        </div>#}

        <p style="font-size: 1.5em;">Your account will automatically be deleted when the study is finished (01.04.2025)
        </p>
        <div class="mb-3">
            <div style="font-size: 0.8em; display: inline-block;position:relative; top: 0em">I accept the <a class="link-success" onclick="showDevNotice()">terms</a>.</div>
            <input class="form-check-input" type="checkbox" id="flexCheckDefault" required>
        </div>
        <div class="mb-3">
            <input id="submit" type="submit" value="Register" class="btn btn-primary">
        </div>

    </form>
    <a href="{%url 'account_user_login'%}" class="link link-primary">Searching for login?</a>
</div>






<script>
document.addEventListener("DOMContentLoaded", function() {
    function getQueryParam(param) {
        const urlSearchParams = new URLSearchParams(window.location.search);
        return urlSearchParams.get(param);
    }
    const registrationId = getQueryParam('registration_id');
    if (registrationId) {
        document.getElementById('registration_id').value = registrationId;
    }
});

    function closeDevNotice(){
        $("#termsModal").modal('toggle')
    }

    function showDevNotice(){
        $("#termsModal").modal('show')
        {#$("#liveToast").modal('show')#}
    }
</script>
    </body>
{% endblock %}
